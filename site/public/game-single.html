<html>

<head>
    {{{head}}}
    <title>{{_wogSEO.title}} - {{game.name}}</title>
    <meta name="description" content="{{game.short_description}}">
    <meta name="keywords" itemprop="keywords" content="{{_wogSEO.keywords}}">
    <link rel="canonical" href="{{_wogSEO.fullUrl}}">
    <meta property="og:locale" content="fa_IR">
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{_wogSEO.title}} - {{game.name}}">
    <meta property="og:description" content="{{game.short_description}}">
    <meta property="og:locale" content="fa_IR">
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{_wogSEO.fullUrl}}">
    <meta property="og:site_name" content="واج">
    <meta property="article:section" content="{{game.name}}">
    <meta property="og:image" content="{{game.cover}}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@wogcompany">
    <meta name="twitter:description" content="{{game.short_description}}">
    <meta name="twitter:title" content="{{_wogSEO.title}} - {{game.name}}">
    <meta name="twitter:image" content="{{wog.cover}}">
    <style>
        .champ-list-title {
            background-color: #ff8800 !important;
            -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0), inset 0 0 1px 1px #ff8800;
            -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0), inset 0 0 1px 1px #ff8800;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0), inset 0 0 1px 1px #ff8800;
            background-image: radial-gradient(ellipse farthest-corner at center 0px, #ffc400 -150%, #ffc400 45%, #ff8800 85%);
            display: inline-block;
            width: auto;
            padding: 5px 10px;
            /* border-top-left-radius: 5px;
            border-bottom-left-radius: 5px; */
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .champ-list-title h2 {
            font-size: 28px;
            margin: 0;

        }

        .champ-box {
            color: white !important;
            border: 1px solid #000;
            background: #1a1b1f;
            position: relative;
            display: inline-block;
            width: 10%;
            margin: 2px 2px;
            float: right;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none !important;
            height: 170px;
        }

        .champ-box.champ.vg {
            height: 100px;
        }

        .champ-box:hover {
            box-shadow: 0 0 15px rgba(255, 136, 0, 0.8);
            background: #2a2b2f;
        }

        .dota2 .champ-box {
            width: 15%;
            /* margin: 2px 2px; */
        }


        .champ-box::before {
            box-shadow: 0 1px 3px rgba(0, 0, 0, .4), inset 0 1px 1px rgba(255, 255, 255, .2);
            content: "";
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            border-radius: 5px;
        }

        .champ-box .icon {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .champ-box .zoom {
            transition: transform 0.2s;
            transform: scale(0);
            position: absolute;
            top: -54px;
            left: -30px;
            pointer-events: none;
        }

        .champ-box .zoom.topRow {
            top: 0px;
        }

        .champ-box .zoom.firstCol {
            top: 0px;
            left: -75px;
        }

        .champ-box:hover {
            z-index: 1000;
        }

        .champ-box:hover .zoom {
            transform: scale(1);
            z-index: 9999;
            border-radius: 5px;
            border: 1px solid #000;
            box-shadow: 1px 2px 10px #000;
        }

        .champ-box .content {
            position: relative;
            width: 100%;
            z-index: 1;
        }

        .champ-box .content h4 {
            font-size: 14px;
            margin: 5px 0;
            height: 30px;
            text-overflow: clip;
        }


        @media (max-width: 576px) {
            .dota2 .champ-box {
                width: 23%;
                margin: 2px;
                float: right;
                height: 160px;
                margin-bottom: 5px;
                overflow: hidden;

            }

            .dota2 .champ-box .zoom {
                display: none;
            }
        }

        .champ-box.item-box {
            width: 8%;
            height: 96px;
        }

        .champ-box.item-box .content h4 {
            font-size: 10px;
            display: block;
            height: 30px;
            text-overflow: clip;
        }

        .dota2 .champ-box.item-box {
            width: 10%;
            overflow: hidden;

        }

        .dota2 .champ-box.item-box .content h4 {
            font: 8px;
            text-overflow: clip;
        }

        @media (max-width: 576px) {
            .dota2 .champ-box.item-box {
                width: 18%;
                margin: 2px;
                float: right;
                height: 85px;
                margin-bottom: 5px;
                overflow: hidden;

            }
        }

        .build-box {
            display: block;
            border: 1px solid #111;
            border-bottom: 1px solid #2e2e2e;
            background: #0f0f0f;
            padding: 0px;
            overflow: hidden;
            color: white !important;
            text-decoration: none !important;
        }

        .build-box:hover {
            background: #1e1e1e;
        }

        .build-box .icon-wrapper {
            width: 20%;
            float: right;
            padding: 5px;
        }

        .build-box .icon-wrapper img {
            border-radius: 2px;
        }

        .build-box .content-wrapper {
            width: 80%;
            display: inline-block;
            float: right;
            padding: 5px;
        }

        .build-box .content-wrapper h4 {
            font-size: 13px;
            margin-bottom: 2px;
        }

        .build-box .content-wrapper .username {
            font-size: 12px;
            color: #ff8800;
        }

        .build-box .content-wrapper .item-wrapper {
            margin-top: 5px;
        }

        .build-box .content-wrapper .item-wrapper .item {
            width: 26px;
            /* border:1px solid #eee; */
            margin: 0 2px;
        }

        .build-box .vote-wrapper {
            position: absolute;
            top: 3px;
            left: 3px;
        }

        .build-box .vote-wrapper span {
            display: block;
            font-size: 10px;
            margin: 2px 0;
        }

        .stream-box {
            display: block;
            width: 100%;
            border: 1px solid #111;
            border-bottom: 1px solid #2e2e2e;
            background: #1e1e1e;
            padding: 0px;
            overflow: hidden;
            font-size: 12px;
            margin-bottom: 5px;
            text-decoration: none !important;
        }

        .stream-box:hover {
            background: #2e2e2e;
            border: 1px solid #ffc400;
        }

        .stream-box span {
            display: block;
            padding: 5px 10px;
        }

        .items-tooltip-box {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 999999;
            background-color: #eeee;
            padding: 10px;
        }
    </style>
</head>

<body>
    {{{navbar}}}
    <section class="parralax-fixed-height"
        style="background-image:url('{{game.cover}}');height:250px;position: relative">
        <div class="wog-overlay"></div>
        <div class="container text-center" style="z-index:1;position: relative;padding-top:35px">
            <h1 class="shadow-text" style="color:white;font-size:54px;">{{game.name}}</h1>
        </div>
    </section>
    <section class="bg-section" style="padding:20px 0;">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <div class="champ-list-title">
                        <h2>قهرمان ها</h2>
                    </div>
                    <div id="champs-row" class="{{game.token}}" style="overflow:hidden;padding-bottom:10px;">
                        <!-- <div name="loading" class="text-center" style="margin:10px 0;">
                            <img src="/images/loading.gif" width="72px" />
                        </div> -->
                        {{#champions_1}}
                        <a href="{{siteUrl}}" class="champ-box champ {{game.token}} text-center">
                            <div class="content">
                                <img class="icon" src="{{icon_tall}}" width="100%" />
                                <h4 class="text-white text-english">{{name}}</h4>
                                <video playsinline autoplay muted loop class="zoom" poster="{{icon_tall}}">
                                    <source src="{{icon_gif}}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        </a>
                        {{/champions_1}}
                        {{#champions_2}}
                        <a href="{{siteUrl}}" class="champ-box champ {{game.token}} text-center" style="display:none;">
                            <div class="content">
                                <img class="icon" src="{{icon_tall}}" width="100%" />
                                <h4 class="text-white text-english">{{name}}</h4>
                                <video playsinline autoplay muted loop class="zoom" poster="{{icon_tall}}">
                                    <source src="{{icon_gif}}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        </a>
                        {{/champions_2}}
                    </div>
                    <div class="btn btn-md btn-black" id="champions-load-more-btn" onclick="champions_show_all()">
                        <span>مشاهده
                            همه</span></div>
                    <hr />
                    <div class="champ-list-title">
                        <h2>آیتم ها</h2>
                    </div>
                    <div id="items-row" class="{{game.token}}" style="overflow:hidden;margin-bottom:10px;">
                        <!-- <div name="loading" class="text-center" style="margin:10px 0;">
                            <img src="/images/loading.gif" width="72px" />
                        </div> -->
                        {{#game.items}}
                        <div class="champ-box item-box  text-english text-center tooltipster" itemId="{{_id}}"
                            data-tooltip-content="#tooltip_item_{{_id}}">
                            <div class="content">
                                <img class="icon" src="{{icon}}" width="100%" />
                                <h4 class="text-english">{{name}}</h4>
                            </div>
                        </div>
                        {{/game.items}}
                    </div>
                    <div class="btn btn-md btn-black" id="items-load-more-btn" onclick="items_show_all()"><span>مشاهده
                            همه</span></div>
                </div>
                <div class="col-md-4">
                    <h3>تازه های آموزش ها:<a href="/builds/game/{{game.slug}}"
                            class="btn btn-xs btn-green float-left" style="margin-top:5px;"><span>مشاهده
                                همه</span></a>
                    </h3>
                    <div id="builds-row">
                        <!-- <div name="loading" class="text-center" style="margin:10px 0;width:100%;">
                            <img src="/images/loading.gif" width="72px" />
                        </div> -->
                        {{#builds}}
                        <a class="card build-box" href="{{siteUrl}}">
                            <div class="icon-wrapper"><img src="{{_champ.icon_tall}}" width="100%" /></div>
                            <div class="content-wrapper">
                                <h4>{{title}}</h4><b class="username">توسط <span userId="${b.userId}"
                                        label="username">{{_user.username}}</span></b>
                            </div>
                            <div class="vote-wrapper">
                                <span><i class="fas fa-thumbs-up"></i>&nbsp;&nbsp;{{votes.length}} رای</span>
                                <span><i class="fas fa-eye"></i>&nbsp;&nbsp;{{views}} بازدید</span>
                                <span><i class="fas fa-comment"></i>&nbsp;&nbsp;{{comments.length}} نظر</span>
                            </div>
                        </a>
                        {{/builds}}
                    </div>
                    <h3 style="margin-top:10px;font-size:22px;">استریم های فعال:</h3>
                    <div id="streamers-row" class="row">
                        <div name="loading" class="text-center" style="margin:10px 0;width:100%;">
                            <img src="/images/loading.gif" width="72px" />
                        </div>
                    </div>
                    <!-- Game Gallery -->
                    <div class="widget-box" style="margin-top:10px;">
                        <div class="title-wrapper">
                            <h3>گالری</h3>
                        </div>
                        <div class="content-wrapper" id="game-gallery-box">
                            <!-- <div name="loading" class="text-center" style="margin:10px 0;width:100%;">
                                <img src="/images/loading.gif" width="72px" />
                            </div> -->
                            {{#media}}
                            <a class="img-col" href="{{siteUrl}}"><img src="{{thumbnail_150x150}}" width="100%"></a>
                            {{/media}}
                        </div>
                    </div>
                    <!-- END Game Gallery -->
                </div>
            </div>
        </div>
    </section>
    <!-- <div class="items-tooltip-box tooltipster" data-tooltip-content="#tooltip_content">
        <h3>^_^</h3>
    </div>
    <div class="tooltip_templates">
        <span id="tooltip_content">
            <img src="/images/jaina.jpg" width="128px" /> <strong>This is the content of my tooltip!</strong>
        </span>
    </div> -->
    <div id="tooltips-container">
        {{#game.items}}
        <div class="tooltip_templates">
            <span id="tooltip_item_{{_id}}">
                <img src="{{icon}}" width="64px" />
                <strong>{{name}}</strong>
                <div class="text-english" style="direction:ltr;text-align:left">
                    <div><b style="color:#ffc400;">Category: </b><span
                            style="text-transform:capitalize">{{category}}</span></div>
                    <div><b style="color:#ffc400;">Price: </b><span style="text-transform:capitalize">{{price}}</span>
                    </div>
                    {{#hasRecipe}}
                    <div><b style="color:#03A9F4">Requires Recipe</b></div>
                    {{/hasRecipe}}
                    {{#coolDown}}
                    <div><b style="color:#ffc400;">Cool Down: </b>{{coolDown}} seconds</div>
                    {{/coolDown}}
                    {{#manaCost}}
                    <div><b style="color:#ffc400;">Mana Cost: </b>{{manaCost}}</div>
                    {{/manaCost}}
                    <div class="text-english">{{{description}}}</div>

                </div>
            </span>
        </div>
        {{/game.items}}
    </div>
    <script>
        function champions_show_all()
        {
            $("#champions-load-more-btn").hide();
            $(".champ-box").show();
        }
        function items_show_all()
        {
            $("#items-load-more-btn").hide();
            $(".item-box").show();
        }
        $(() =>
        {
            //setup champions:
            var champs = $(".champ-box");
            for (var i = 0; i < champs.length; i++)
            {
                if (i == 0)
                    $(champs[i]).find(".zoom").addClass('firstCol');
                else if (i <= 5)
                    $(champs[i]).find(".zoom").addClass('topRow');
                else if (i % 6 == 0)
                    $(champs[i]).find(".zoom").addClass('firstCol');
            }
            //setup items:
            var items = $(".item-box");
            for (var i = 28; i < items.length; i++)
            {
                $(items[i]).hide();
            }
            $('.tooltipster').tooltipster();
            //streamers:
            let gameId = `{{game.twitchGameId}}`;
            if(gameId == '' || gameId == 'undefined')
            {
                if (`{{game.token}}` == 'dota2')
                    gameId = 29595;
                else if (`{{game.token}}` == 'mortal')
                    gameId = 460521;
                else
                    gameId = 478467; // vg
            }
            getTwitchStreamersFor(gameId, (ss) =>
            {
                streamers = ss;
                streamers_create();
            });
        });
        function streamers_create()
        {
            console.log("streamers loaded " + streamers.length);
            for (var i = 0; i < streamers.length && i < 3; i++)
            {
                var s = streamers[i];
                console.log(s);
                $("#streamers-row").append(`<div class="col-12"><a class="stream-box text-white" href="${s.url}"><img src="${s.thumbnail}" width="100%" /><span>${s.title}</span></a></div>`);
            }
            $("#streamers-row [name=loading]").hide();
        }
    </script>
    {{{footer}}}
</body>

</html>