<html>

<head>
    {{{head}}}
    <title>بازی های گروهی ESL One Birmingham 2019</title>
    <meta name="description" content="{{_wogSEO.description}}">
    <meta name="keywords" itemprop="keywords" content="{{_wogSEO.keywords}}">
    <link rel="canonical" href="http://worldofgamers.ir/">

    <meta property="og:locale" content="fa_IR">
    <meta property="og:type" content="article">
    <meta property="og:title" content="بازی های گروهی ESL One Birmingham 2019">
    <meta property="og:description" content="{{_wogSEO.description}}">
    <meta property="og:url" content="{{_wogSEO.fullUrl}}">
    <meta property="og:image" content="http://worldofgamers.ir/wog-logo.png">
    <meta property="og:site_name" content="واج">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@wogcompany">
    <meta name="twitter:description" content="{{_wogSEO.description}}">
    <meta name="twitter:title" content="بازی های گروهی ESL One Birmingham 2019">
    <meta name="twitter:image" content="http://worldofgamers.ir/images/wog-logo.png">
    <style>
        footer {
            margin: 0;
        }

        .section-main {
            background-image: url('/dota2book/images/immortals_bg.jpg');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .player-details {
            background-color: #242029;
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 10px 20px;
            border-radius: 10px
        }

        .see-rankings {
            display: block;
            background-image: url('/dota2book/images/green-book-logo.png');
            height: 130px;
            margin-top: 10px;
            margin-bottom: 10px;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            padding-top: 45px;
            border-radius: 20px
        }

        .see-rankings-text {
            color: white;
            text-decoration: none;
        }

        .see-rankings-text:hover {
            text-decoration: none;
            color: lightgray;
        }

        .bet-box {
            display: block;
            width: 100%;
            position: relative;
            min-height: 200px;
            border: 2px solid #d8064f;
            border-radius: 5px;
            margin-bottom: 10px;
            background: linear-gradient(160deg, #0d2740 0%, #d8064f 100%);
        }

        .bet-box.disabled {
            position: relative;
        }

        .bet-box.disabled .overlay {
            width: 100%;
            height: 100%;
            background-color: rgba(120, 120, 120, 0.5);
            z-index: 2;
            position: absolute;
        }

        .bet-box .content {
            position: relative;
            z-index: 1;
        }

        .bet-box .team-row {
            display: block;
            width: 100%;
            height: 140px;
            position: relative;
            background-size: cover;
            background-position: center;
            cursor: pointer;
        }

        .bet-box .team-row:nth-of-type(1) {
            border-top-right-radius: 5px;
            border-top-left-radius: 5px;
            border-bottom: 1px solid #d8064f;
        }

        .bet-box .team-row .team-overlay {
            position: absolute;
            color: white;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            text-align: center;
            opacity: 0;
            transition: all 300ms;
            padding-top: 50px;
            font-weight: bold;
            text-shadow: 2px 3px 3px rgba(0, 0, 0, 0.6);
            font-size: 18px;
        }

        .bet-box .team-row:hover .team-overlay {
            opacity: 1;
        }

        .bet-box .team-row .team-selected-mark {
            position: absolute;
            top: 2px;
            left: 2px;
            color: white;
            text-align: center;
        }
        .bet-box .team-row.not-selected .team-overlay{
            opacity: 1;
        }
        .bet-box .team-row.not-selected .team-overlay span{
            display:none;
        }
        .bet-box .team-row.not-selected .team-selected-mark{
            display:none;
        }
    </style>
</head>

<body>
    {{{navbar}}}
    <navfiller></navfiller>
    <section class="section-main">
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-12">
                    <div class="player-details">
                        <div class="row">
                            <div class="col-md-4 col-4">
                                <img src="/dota2book/images/Ti9_battle_pass.png" style="width:100%" alt="">
                            </div>
                            <div class="col-md-8 col-8">
                                <h2 style="color:white;font-weight: bold">{{currentUser.username}}</h2>
                                <h6 style="color: white">رتبه:{{rank}}</h6>
                                <h6 style="color:orange">سکه:&nbsp;<span>{{currentUser.dota2Book2019.coins}}</span></h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
                <div class="col-md-4 col-12">
                    <a class="see-rankings text-center" href="{{#SITE_URL}}/dota2-book/leaderboard{{/SITE_URL}}">
                        <span class="see-rankings-text" href="#">مشاهده رتبه بندی‌ها</span>
                    </a>
                </div>
            </div><!-- end of row-->
            <h2 style="color:white;margin-bottom: 10px">بازی های گروهی&nbsp;<span class="text-english">ESL One
                    Birmingham 2019</span></h2>
            <p style="color:white">به مرحله بازی های گروهی خوش آمدید برای هر مسابقه نتیجه را پیش بینی کنید در صورتی که
                پیش بینی شما درست
                باشد همان تعداد سکه برنده می شوید در صورتی که اشتباه باشد سکه ای از دست نمی دهید دقت داشته باشید که پس
                از ثبت امکان تغییر انتخاب ها وجود ندارد.</p>
            <!-- start form -->
            <form id="bets-form" action="/dota2-book/submit-bets" method="POST">
                <h3 style="color:white">گروه A:</h3>
                <div class="row" id="group-a"></div>
                <h3 style="color:white">گروه B:</h3>
                <div class="row" id="group-b"></div>
            </form>
            <script>
                //create data , functions:
                let coinsShowVal = 0;
                const ESL_TEAMS = JSON.parse(`{{{ESL_TEAMS}}}`);
                const GROUP_A_TOKENS = JSON.parse(`{{{GROUP_A}}}`);
                const GROUP_B_TOKENS = JSON.parse(`{{{GROUP_B}}}`);
                const GROUP_A = [], GROUP_B = [];
                for (var i = 0; i < GROUP_A_TOKENS.length; i++)
                    GROUP_A.push(getTeam(GROUP_A_TOKENS[i]));
                for (var i = 0; i < GROUP_B_TOKENS.length; i++)
                    GROUP_B.push(getTeam(GROUP_B_TOKENS[i]));
                console.log(ESL_TEAMS);
                const ALL_BETS = JSON.parse(`{{{ALL_BETS}}}`);
                const currentUser = {
                    _id: `{{currentUser._id}}`,
                    username: `{{currentUser.username}}`,
                    token: `{{{currentUser.token}}}`,
                    dota2Book2019: JSON.parse(`{{{DOTA2_BOOK_2019}}}`),
                };
                console.log(currentUser);
                $(() =>
                {
                    //render all group stage bets:
                    for (var i = 0; i < GROUP_A.length; i++)
                    {
                        for (var j = i + 1; j < GROUP_A.length; j++)
                        {
                            render_bet('#group-a', GROUP_A[i], GROUP_A[j]);
                        }
                    }
                    for (var i = 0; i < GROUP_B.length; i++)
                    {
                        for (var j = i + 1; j < GROUP_B.length; j++)
                        {
                            render_bet('#group-b', GROUP_B[i], GROUP_B[j]);
                        }
                    }
                });
                //data functions:
                function getTeam(token)
                {
                    for (var i = 0; i < ESL_TEAMS.length; i++)
                        if (ESL_TEAMS[i].token == token)
                            return ESL_TEAMS[i];
                    return undefined;
                }
                function getBet(token)
                {
                    for (var i = 0; i < ALL_BETS.length; i++)
                        if (ALL_BETS[i].token == token)
                            return ALL_BETS[i];
                    return undefined;
                }
                function getUserBet(token)
                {
                    for (var i = 0; i < currentUser.dota2Book2019.bets.length; i++)
                    {
                        if (currentUser.dota2Book2019.bets[i].token == token)
                            return currentUser.dota2Book2019.bets[i];
                    }
                    return undefined;
                }
                //render functions:
                function render_bet(parent, teamA, teamB)
                {
                    let betToken = 'matchup_' + teamA.token + '_vs_' + teamB.token;
                    let bet = getBet(betToken);
                    if (bet == undefined)
                        return;
                    let userBet = getUserBet(betToken);
                    let disabledOverlay = '', hiddenInput = '';
                    if (!bet.active)
                    {
                        disabledOverlay = `<div class="overlay"></div>`;
                    }
                    else
                    {
                        if (userBet == undefined)
                        {
                            hiddenInput = `<input type="hidden" name="${bet.token}" value=""/>`;
                        }
                        else
                        {

                        }
                    }
                    $(parent).append(`
                        <div class="col-md-4 col-12">
                            <div class="bet-box ${bet.active ? '' : 'disabled'}" betToken="${bet.token}" teamA="${teamA.token}" teamB="${teamB.token}">
                                ${disabledOverlay}
                                ${hiddenInput}
                                <div class="content">
                                    <div class="team-row ${userBet != undefined && userBet.value == teamA.token ? 'selected' : 'not-selected'}" style="background-image:url('/dota2book/images/team-secret-cover.jpg')" team="${teamA.token}">
                                        <div class="team-overlay"><span>انتخاب ${teamA.name}</span></div>
                                        <div class="team-selected-mark">
                                            <span class="badge badge-warning">
                                                <span class="fas fa-check"></span>&nbsp;انتخاب شما
                                            </span>
                                        </div>
                                    </div>
                                    <div class="team-row ${userBet != undefined && userBet.value == teamB.token ? 'selected' : 'not-selected'}" style="background-image:url('/dota2book/images/team-secret-cover.jpg')" team="${teamB.token}">
                                        <div class="team-overlay"><span>انتخاب ${teamB.name}</span></div>
                                        <div class="team-selected-mark">
                                            <span class="badge badge-warning">
                                                <span class="fas fa-check"></span>&nbsp;انتخاب شما
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `);
                }
            </script>
            <!-- end form logic -->
            <!-- other ways of earning money -->

        </div>
    </section>
    {{{footer}}}
</body>

</html>