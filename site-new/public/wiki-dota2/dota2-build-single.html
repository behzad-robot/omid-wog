<html>

<head>
    {{{head}}}
    <title>{{build.title}}</title>
    <meta name="description" content="آموزش Dota 2 - {{build.description}}">
    <meta name="keywords" itemprop="keywords" content="{{_wogSEO.keywords}}">
    <link rel="canonical" href="{{_wogSEO.fullUrl}}">

    <meta property="og:locale" content="fa_IR">
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{build.title}}">
    <meta property="og:description" content="{{build.description}}">
    <meta property="og:url" content="{{_wogSEO.fullUrl}}">
    <meta property="og:image" content="{{build._champion.iconTall}}">
    <meta property="og:site_name" content="واج">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@wogcompany">
    <meta name="twitter:description" content="{{build.description}}">
    <meta name="twitter:title" content="{{build.title}}">
    <meta name="twitter:image" content="{{build._champion.iconTall}}">
    <style>
        h1 {
            font-size: 36px;
        }

        h2 {
            font-size: 24px;
        }

        h3 {
            font-size: 18px;
            color: #e0e1e2;
        }

        .main-section {
            padding-top: 20px;
        }

        .top-part {
            display: block;
            width: 100%;
            overflow: hidden;
        }

        .top-part-wrapper {
            float: right;
            overflow: hidden;
        }

        .top-part-img-wrapper {
            float: left;
            width: 300px;
            padding: 1px;
            border: 2px solid orange;
            margin: 0 auto;
        }

        .itemRow-wrapper {
            display: block;
            margin-bottom: 10px;
        }

        .itemRow-wrapper .itemRow-title {
            margin-bottom: 10px;
        }

        .item-box {
            display: inline-block;
            width: 72px;
            padding: 2px;
            border: 1px solid orange;
            margin: 0px 2px;
        }

        .item-tooltip {
            width: 350px;
            max-width: 100vw;
        }

        .item-tooltip .item-icon {
            display: inline-block;
            width: 64px;
            vertical-align: top;
            float: right;
        }

        .item-tooltip .item-description {
            display: inline-block;
            vertical-align: top;
            font-size: 12px;
            width: 250px;
            padding-right: 5px;
            float: right;
        }

        .item-tooltip .item-description b {
            color: orange;
        }

        .ability-wrapper {
            display: block;
            width: 100%;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .ability-wrapper .ability-btn {
            float: left;
            width: 22px;
        }

        .ability-wrapper .ability-icon {
            float: right;
            display: inline-block;
            width: 32px;
            margin-right: 2px;
            vertical-align: top;

        }

        .ability-wrapper .ability-level-box {
            display: inline-block;
            float: right;
            width: 32px;
            height: 32px;
            text-align: center;
            color: white;
            margin-right: 2px;
            margin-bottom: 3px;
            background-color: #38486d;
            vertical-align: top;
            padding-top: 4px;
            border-radius: 2px;

        }

        .ability-wrapper .ability-level-box.active {
            background-color: #a00;
            border: none;
        }

        .talent-row {
            display: block;
            background-color: #202d4f;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid orange;
        }

        .talent-row .talent-part {
            text-align: center;
            width: 50%;
            float: left;
            padding: 20px 5px;
            font-family: Roboto;
            direction: ltr;
        }

        .talent-row .talent-part.active {
            background-color: #625549;
        }

        .talent-row .talent-level-wrapper {
            position: absolute;
            width: 100%;
            z-index: 3;
            text-align: center;
        }

        .talent-row .talent-level-wrapper .talent-level {
            background-color: orange;
            color: #202020;
            text-align: center;
            width: 64px;
            height: 64px;
            display: inline-block;
            border-radius: 50%;
            font-family: Roboto;
            padding-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .stats-box .stat-wrapper {
            display: block;
            margin-bottom: 5px;
        }

        .stats-box .stat-icon {
            background-color: #8cc63f;
            color: white;
            text-align: center;
            padding: 10px;
            font-size: 18px;
            border-radius: 5px;
        }

        .stats-box .stat-icon.stat-dislikes {
            background-color: #c1272d;
        }

        .stats-box .stat-icon.stat-views {
            background-color: orange;
        }

        #vote-loading {

            background-color: #1e232d;

            border-bottom-left-radius: 5px;
            text-align: center;
            padding: 20px 0;
        }

        .vote-box {
            display: block;
            overflow: hidden;
        }

        .vote-box .vote-text {
            display: none;
            font-size: 10px;
        }

        .vote-box .vote-text.active {
            display: inline;
        }

        .vote-box .vote-up,
        .vote-box .vote-down {
            float: right;
            width: 50%;
            display: inline-block;
            padding: 10px;
            padding-top: 20px;
            cursor: pointer;
            font-size: 18px;
            height: 64px;
        }

        .vote-box .vote-up {
            border-bottom-right-radius: 5px;
        }

        .vote-box .vote-down {
            border-bottom-left-radius: 5px;
        }

        .vote-box .vote-up:hover,
        .vote-box .vote-up.active {
            background-color: #8cc63f;
        }

        .vote-box .vote-up.active,
        .vote-box .vote-down.active {
            padding-top: 10px;
        }

        .vote-box .vote-down:hover,
        .vote-box .vote-down.active {
            background-color: #c1272d;
        }

        .build-box {
            border-radius: 0;
            background-color: #202D4F;
        }

        .build-box .title-wrapper h2 {
            font-size: 12px;
        }

        .build-box .img-wrapper {
            width: 72px;
            height: 72px;
        }

        .author-section {
            display: block;
            padding: 30px 0;
        }

        .author-box {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            margin-bottom: 10px;
        }

        .author-box .author-img-wrapper {
            display: inline-block;
            width: 96px;

        }

        .author-box .author-img-wrapper img {
            border-radius: 50%;
            width: 100%;
        }

        .author-box .author-info-wrapper {
            display: inline-block;
            vertical-align: top;
            padding-right: 10px;
            padding-top: 5px;
        }

        .description-box {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
        }

        .comment-box {
            display: block;
            background-color: #262e3b;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 3px 4px 3px rgba(0, 0, 0, 0.3);
            margin-bottom: 5px;
        }

        .comment-box .user-profile-img {
            display: inline-block;
            vertical-align: top;
            width: 72px;
            border-radius: 50%;
        }

        .comment-box .comment-content {
            display: inline-block;
            vertical-align: top;
            padding-right: 5px;
        }

        @media (max-width: 576px) {
            h1{
                font-size:30px;
            }
            .top-part-img-wrapper{
                float:initial;
                text-align: center;
                margin-bottom:5px;
            }
            .talent-row .talent-part {
                font-size: 10px;
                padding: 10px 5px;
            }

            .talent-row .talent-level-wrapper .talent-level {
                font-size: 12px;
                width: 32px;
                height: 32px;
                padding-top: 8px;
                margin-top: 2px;
            }
        }
    </style>
</head>

<body class="dota2-body">
    {{{navbar}}}
    <navfiller></navfiller>
    <section class="main-section">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-12">
                    <div class="top-part">
                        <div class="top-part-img-wrapper">
                            <img src="{{build._champion.icon}}" width="100%" />
                        </div>
                        <div class="top-part-wrapper">
                            <h1 class="hero-name">{{build.title}}</h1>
                            <h2>قهرمان:&nbsp;<a href="{{build._champion.siteUrl}}"
                                    class="orange-link">{{build._champion.name}}</a></h2>
                        </div>

                    </div>
                    <h2>آیتم ها:</h2>
                    {{#build._itemRows}}
                    <div class="itemRow-wrapper">
                        <h3 class="itemRow-title">{{title}}</h3>
                        <div class="items-wrapper" rowIndex="{{_index}}">
                            {{#items}}
                            <div class="item-box my-tooltip" itemIndex="{{_index}}"
                                data-tooltip-content="#itemId-{{_id}}" itemId="{{_id}}">
                                <img src="{{icon}}" width="100%" />
                            </div>
                            {{/items}}

                        </div>
                    </div>
                    {{/build._itemRows}}
                    <div style="display: none">
                        {{#game.items}}
                        <div id="itemId-{{_id}}" class="item-tooltip text-english">
                            <img src="{{icon}}" class="item-icon" />
                            <div class="item-description">
                                <span style="color:orange">{{name}}</span>
                                <div style="direction:ltr;text-align:left;">
                                    <div><b>Category:</b>&nbsp;<span>{{category}}</span></div>
                                    <div><b>Price:</b>&nbsp;<span>{{price}}</span></div>
                                    {{#coolDown}}
                                    <div><b>Cool Down:</b>&nbsp;<span>{{coolDown}}</span></div>
                                    {{/coolDown}}
                                    {{#manaCost}}
                                    <div><b>Mana Cost:</b>&nbsp;<span>{{manaCost}}</span></div>
                                    {{/manaCost}}
                                    <div>{{{description}}}</div>
                                </div>
                            </div>
                        </div>
                        {{/game.items}}
                    </div>
                    <script>
                        $(document).ready(function ()
                        {
                            $('.my-tooltip').tooltipster({
                                contentCloning: true
                            });
                        });
                    </script>
                    <h2 style="margin:20px 0">قابلیت های قهرمان:</h2>
                    {{#build._abilities}}
                    <div class="ability-wrapper">
                        <h3>{{title}}<img src="{{#SITE_URL}}/wiki-dota2/images/key-{{btn}}.png{{/SITE_URL}}"
                                class="ability-btn"></h3>
                        <img src="{{icon}}" class="ability-icon" />
                        {{#levels}}
                        <div class="ability-level-box text-english {{#isLevel}}active{{/isLevel}}">
                            {{#isLevel}}{{level}}{{/isLevel}}{{^isLevel}}&nbsp;{{/isLevel}}</div>
                        {{/levels}}
                    </div>
                    {{/build._abilities}}
                    <h2 style="margin:20px 0;">Talents:</h2>
                    <div style="margin-bottom:10px">
                        {{#build._talents}}
                        <div class="talent-row">
                            <div class="talent-level-wrapper"><span class="talent-level">{{level}}</span></div>
                            <div class="talent-part {{#isA}}active{{/isA}}">{{a}}</div>
                            <div class="talent-part {{#isB}}active{{/isB}}">{{b}}</div>
                        </div>
                        {{/build._talents}}
                    </div>
                </div>
                <div class="col-md-4 col-12">
                    <div class="dota-box stats-box" style="margin-bottom:10px">
                        <div class="dota-box-title">
                            <h3 style="color:white;">آمار این آموزش</h3>
                        </div>
                        <div class="dota-box-content">
                            <div style="padding: 10px 10px;">
                                <div class="stat-wrapper"><span
                                        class="fas fa-eye stat-icon stat-views"></span>&nbsp;<span class="text-english"
                                        id="stat-views-count">{{build.views}}&nbsp;</span> بازدید</div>
                                <div class="stat-wrapper"><span
                                        class="fas fa-thumbs-up stat-icon stat-likes"></span>&nbsp;<span
                                        class="text-english"
                                        id="stat-upVotes-count">{{build.upVotes.length}}&nbsp;</span> رای مثبت</div>
                                <div class="stat-wrapper"><span
                                        class="fas fa-thumbs-down stat-icon stat-dislikes"></span>&nbsp;<span
                                        class="text-english"
                                        id="stat-downVotes-count">{{build.downVotes.length}}&nbsp;</span>رای منفی</div>
                            </div>
                            <div id="vote-loading" style="display:none">
                                در حال بارگذاری...
                            </div>
                            <div class="vote-box text-center">
                                <div
                                    class="vote-up {{#build._currentUserHasUpVoted}}active{{/build._currentUserHasUpVoted}}">
                                    <span class="fas fa-thumbs-up"></span>&nbsp;<span
                                        class="vote-text {{#build._currentUserHasUpVoted}}active{{/build._currentUserHasUpVoted}}">شما
                                        به این آموزش رای مثبت داده اید.</span></div>
                                <div
                                    class="vote-down {{#build._currentUserHasDownVoted}}active{{/build._currentUserHasDownVoted}}">
                                    <span class="fas fa-thumbs-down"></span>&nbsp;<span
                                        class="vote-text {{#build._currentUserHasDownVoted}}active{{/build._currentUserHasDownVoted}}">شما
                                        به این آموزش رای منفی داده اید.</span></div>
                            </div>
                            <script>
                                let currentUserID = `{{currentUser._id}}`;
                                $(() =>
                                {
                                    $(".vote-up").click(() => { sendVote('up'); });
                                    $(".vote-down").click(() => { sendVote('down'); });
                                });
                                function sendVote(vote) // up , down
                                {
                                    if (isEmptyString(currentUserID))
                                    {
                                        alert('برای ارسال نظر ابتدا باید وارد حساب کاربری خود در سایت شوید.');
                                        return;
                                    }
                                    if (vote == 'up' && $('.vote-up').hasClass('active'))
                                        return;
                                    if (vote == 'down' && $('.vote-down').hasClass('active'))
                                        return;
                                    $("#vote-loading").show();
                                    $(".vote-box").hide();
                                    fetch('/wiki/dota2/builds/{{build._id}}/vote', {
                                        method: 'POST',
                                        body: JSON.stringify({ userId: '{{currentUser._id}}', token: '{{{currentUser.token}}}', vote: vote }),
                                        headers: {
                                            Accept: 'application/json',
                                            'Content-Type': 'application/json',
                                        }

                                    }).then((response) => response.json())
                                        .then((result) =>
                                        {
                                            if (result.code != 200)
                                            {
                                                alert('خطا:' + result.error);
                                                return;
                                            }
                                            $('.vote-up').removeClass('active');
                                            $('.vote-up .vote-text').removeClass('active');
                                            $('.vote-down').removeClass('active');
                                            $('.vote-down .vote-text').removeClass('active');
                                            if (vote == 'up')
                                            {
                                                $('.vote-up').addClass('active');
                                                $('.vote-up .vote-text').addClass('active');
                                            }
                                            else if (vote == 'down')
                                            {
                                                $('.vote-down').addClass('active');
                                                $('.vote-down .vote-text').addClass('active');
                                            }
                                            $("#vote-loading").hide();
                                            $(".vote-box").show();
                                            if (result.build.views == undefined)
                                                result.build.views = 10;
                                            $("#stat-views-count").html(result.build.views + '&nbsp;');
                                            $("#stat-upVotes-count").html(result.build.upVotes.length + '&nbsp;');
                                            $("#stat-downVotes-count").html(result.build.downVotes.length + '&nbsp;');
                                            console.log(result.build);
                                        });
                                }
                            </script>
                        </div>
                    </div>
                    <div class="dota-box stats-box" style="margin-bottom:10px">
                        <div class="dota-box-title">
                            <h3 style="color:white;">آموزش های محبوب:</h3>
                        </div>
                        <div class="dota-content-box">
                            {{#topBuilds}}
                            <div class="build-box">
                                <a href="{{siteUrl}}" class="img-wrapper"
                                    style="background-image:url('{{_champion.icon}}')">
                                    <!-- <img src="{{_champion.icon}}" alt="{{_champion.name}}" width="100%" /> -->
                                </a>
                                <div class="title-wrapper">
                                    <a href="{{siteUrl}}" class="build-link">
                                        <h2>{{title}}</h2>
                                    </a>
                                    <span class="author">نوشته شده توسط <a href="{{_user.siteUrl}}"
                                            class="orange-link">{{_user.username}}</a></span>
                                    <br>
                                    <span class="badge badge-md badge-warning text-english">Patch {{patch}}</span>
                                </div>
                                <div class="stats-wrapper">
                                    <div class="stat-item">
                                        <span class="fas fa-eye"></span>
                                        <span class="stat-value text-english">200</span>

                                    </div>
                                    <div class="stat-item">
                                        <span class="fas fa-thumbs-up"></span>
                                        <span class="stat-value text-english">10</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="fas fa-thumbs-down"></span>
                                        <span class="stat-value text-english">10</span>
                                    </div>
                                </div>
                                <div class="date-wrapper">
                                    <span>{{createdAt_persian}}</span>
                                </div>
                            </div>
                            {{/topBuilds}}
                        </div>
                    </div>
                    <!--end of topBuilds dota-box-->
                    <div>
                        <a href="{{_siteConfig.discord}}" target="_blank"><img
                                src="/wiki-dota2/images/join-wog-discord.png" width="100%" /></a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="author-section" style="background-image:url('{{build._champion.iconBlur}}')">
        <div class="container">
            <div class="author-box">
                <div class="author-img-wrapper"><img src="{{build._user.profileImage}}" /></div>
                <div class="author-info-wrapper">
                    <span style="color:#f0f1f2">نوشته شده توسط:<a href="{{build._user.siteUrl}}"
                            class="orange-link">{{build._user.username}}</a></span><br>
                    <span style="color:#e0e1e2">{{build.createdAt_persian}}</span>
                </div>
            </div>
            <div class="description-box">
                <h2>توضیحات:</h2>
                <div>{{{build.description}}}</div>
            </div>
        </div>
    </section>
    <section class="comments-section">
        <div class="container">
            <h2>نظرات کاربران:</h2>
            {{#currentUser}}
            <div class="new-comment-box">
                <form action="/comments/new" method="POST" id="new-comment-form">
                    <h3>ارسال نظر:</h3>
                    <input name="objectType" value="builds" type="hidden" />
                    <input name="objectId" value="{{build._id}}" type="hidden" />
                    <textarea name="body" class="form-control"
                        style="width:400px;max-width:100%;height:150px;"></textarea>
                    <input type="submit" class="btn btn-md btn-warning" value="ثبت نظر" style="margin-top:5px;" />
                </form>
                <script>
                    $(() =>
                    {
                        $("#new-comment-form").ajaxForm({
                            beforeSubmit: (formData, jqForm, options) =>
                            {
                                var str = $("#new-comment-form [name=body]").val();
                                str = str.replaceAll(' ', '').replaceAll('\n', '').replaceAll('<br>', '');
                                if (str == '')
                                {
                                    alert('لطفا متن نظر را وارد کنید.');
                                    return false;
                                }
                                return true;
                            },
                            error: (xhr, text, err) =>
                            {
                                alert('خطا از سمت سرور');
                                console.log(text);
                                console.log(err);
                            },
                            success: (text, code, xhr, form) =>
                            {
                                if (typeof text == 'string')
                                    text = JSON.parse(text);
                                if (text.error)
                                {
                                    alert(text.error);
                                    return;
                                }
                                var comment = text.comment;
                                if (comment._draft == true)
                                {
                                    alert('با تشکر نظر شما با موفقیت ثبت شد و پس از بررسی مدیر سایت نمایش داده میشود.');
                                }
                                else
                                {
                                    alert('نظر شما با موفقیت ثبت شد.');
                                    $("#comments-list").append(`
                                    <div class="comment-box" id="comment-${comment._id}">
                                        <img class="user-profile-img" src="{{currentUser.profileImage}}">
                                        <div class="comment-content">
                                            <a class="orange-link" href="{{currentUser.siteUrl}}"
                                                style="font-size:18px;color:white;display:block;margin-bottom:0px;">{{currentUser.username}}</a>
                                            <div>${comment.body}</div>
                                            <span style="font-size:10px;color:#c0c1c2;">${comment.createdAt_persian}</span>
                                        </div>
                                    </div>
                                    `);
                                    scroll_to(`#comment-${comment._id}`);
                                    $("#no-comments").hide();

                                }
                                $("#new-comment-form").clearForm();
                            },
                        });
                    });
                </script>
            </div>
            {{/currentUser}}
            {{^currentUser}}
            <span style="display:block;margin:20px 0;">برای ثبت نظر ابتدا باید <a href="/login" class="orange-link">وارد
                    شوید</a></span>
            {{/currentUser}}
            <div class="row">
                <div class="col-md-6 col-12" id="comments-list">
                    {{#comments}}
                    <div class="comment-box">
                        <img class="user-profile-img" src="{{_user.profileImage}}">
                        <div class="comment-content">
                            <a class="orange-link" href="{{_user.siteUrl}}"
                                style="font-size:18px;color:white;display:block;margin-bottom:0px;">{{_user.username}}</a>
                            <div>{{{body}}}</div>
                            <span style="font-size:10px;color:#c0c1c2;">{{createdAt_persian}}</span>
                        </div>
                    </div>
                    {{/comments}}
                    {{^comments}}
                    <div class="text-center" id="no-comments">
                        <h3>برای این آموزش هیچ نظری ثبت نشده است.</h3>
                    </div>
                    {{/comments}}
                </div>
            </div>
        </div>
    </section>
    {{{footer}}}
</body>

</html>