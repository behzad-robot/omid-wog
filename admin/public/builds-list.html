<html>

<head>
    {{{head}}}
    <style>

    </style>
</head>

<body>
    {{{actionbar}}}
    <div class="container">
        <h2>Builds:</h2>
        <!-- <span id="loading">Loading..</span> -->
        <!-- <form action="/admin/builds/new" method="post" id="new-build">
            <div class="form-row">
                <b>champId:</b>
                <select name="champId" id="champs" class="form-control m">
                </select>
            </div>
            <div class="form-row">
                <b>gameId:</b>
                <select name="gameId" id="games" class="form-control m"></select>
            </div>
            <input type="submit" class="btn btn-md btn-info" value="+New Champ Build" />
        </form> -->
        <a href="/admin/builds/new/?gameId=5c483dc1c966fb21f9ae800c" class="btn btn-md btn-warning">+New Build</a>
        <hr />
        <div id="list">
        </div>
        <script>
            let champs = [];
            $("#new-build").hide();
            $("#loading").show();
            $(() =>
            {
                findObjects('builds', (builds) =>
                {
                    console.log((builds));
                    for (var i = 0; i < builds.length; i++)
                    {
                        var build = builds[i];
                        $("#list").append(
                            `<div class="box-row">`
                            + `<h4>${build.title}</h4>`
                            + `<p><${build.description}</p><hr/>`
                            + `<p><b>userId: </b>${build.userId}</p>`
                            + `<small><b>createdAt: </b>${build.createdAt}</small>&nbsp;&nbsp;<small><b>updatedAt:</b>${build.updatedAt}</small><hr />`
                            + `<div class="text-right"><a class="btn btn-md btn-info" href="/admin/builds/${build._id}">Edit</a></div>`
                            + `</div>`
                        );
                    }
                    // findObjects('games', (games) => {
                    //     for (var i = 0; i < games.length; i++) {
                    //         const game = games[i];
                    //         $("#games").append(
                    //             `<option value="${game._id}">${game.name}</option>`
                    //         );

                    //     }
                    //     findObjects('champions', (cs) => {
                    //         champs = cs;
                    //         console.log(champs);
                    //         $("#new-build").show();
                    //         $("#loading").hide();
                    //         $("#games").change(function () {
                    //             $("#champs").html("");
                    //             var gameId = $("#games").val();
                    //             alert(gameId);
                    //             for (var i = 0; i < champs.length; i++) {
                    //                 console.log(champs[i].gameId + ',' + champs[i].name);
                    //                 if (champs[i].gameId == gameId)
                    //                     $("#champs").append(`<option value="${champs[i]._id}">${champs[i].name}</option>`)
                    //             }
                    //         });
                    //     });

                });
            });
        </script>
    </div>
    {{{footer}}}
</body>

</html>